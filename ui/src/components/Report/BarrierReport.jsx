import React from 'react'
import PropTypes from 'prop-types'
import {
  Document,
  Image,
  Link,
  Page,
  View,
  Text,
  StyleSheet,
} from '@react-pdf/renderer'

const styles = StyleSheet.create({
  page: {
    fontFamily: 'Helvetica',
    paddingTop: '0.5in',
    paddingBottom: '1in',
    paddingHorizontal: '0.5in',
  },
  header: { marginBottom: 24 },
  title: { fontWeight: 'bold', fontFamily: 'Helvetica-Bold', fontSize: 24 },
  link: {
    textDecoration: 'underline',
    color: '#1891ac',
  },
  subtitle: {
    fontStyle: 'italic',
    fontFamily: 'Helvetica-Oblique',
    fontSize: 12,
  },
  mapBorder: {
    border: '1 solid #AAA',
  },
  map: {},
  locatorMap: {
    width: 150,
    height: 150,
    marginTop: 24,
  },
  footer: {
    position: 'absolute',
    display: 'flex',
    justifyContent: 'space-between',
    bottom: 30,
    left: '0.5in',
    right: '0.5in',
    color: 'grey',
  },
  createdBy: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    fontSize: 10,
  },
  pageNumber: {
    position: 'absolute',
    bottom: 0,
    right: 0,
    left: 0,
    textAlign: 'right',
    fontSize: 12,
  },
})

const BarrierReport = ({ name, county, state, map, locatorMap }) => (
  <Document
    author="generated by the Southeast Aquatic Barrier Prioritization Tool"
    creator="Southeast Aquatic Barrier Prioritization Tool"
    language="en-us"
  >
    <Page style={styles.page} size="LETTER">
      <View style={styles.header}>
        <Text style={styles.title}>{name}</Text>
        <Text style={styles.subtitle}>
          {county}, {state}
        </Text>
      </View>

      <View style={styles.mapBorder}>
        <Image src={map} />
      </View>

      <View style={[styles.mapBorder, styles.locatorMap]}>
        <Image src={locatorMap} />
      </View>

      <View fixed style={styles.footer}>
        <Text style={styles.createdBy} fixed>
          Created by the{' '}
          <Link src="https://connectivity.sarpdata.com/" style={styles.link}>
            Southeast Aquatic Barrier Prioritization Tool
          </Link>{' '}
          on {new Date().toLocaleDateString()}.
        </Text>
        <Text
          style={styles.pageNumber}
          fixed
          render={({ pageNumber, totalPages }) =>
            `page ${pageNumber} of ${totalPages}`
          }
        />
      </View>
    </Page>
  </Document>
)

BarrierReport.propTypes = {
  name: PropTypes.string.isRequired,
  county: PropTypes.string.isRequired,
  state: PropTypes.string.isRequired,
  map: PropTypes.string.isRequired,
  locatorMap: PropTypes.string.isRequired,
}

export default BarrierReport
